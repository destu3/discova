(()=>{"use strict";const e="id\n  title {\n    romaji\n    english\n    native\n  }\n  type\n  genres\n  startDate {\n    year\n    month\n    day\n  }\n  endDate {\n    year\n    month\n    day\n  }\n  season\n  seasonYear\n  format\n  status\n  episodes\n  trending\n  trailer {\n    id\n    site\n  }\n  bannerImage\n  coverImage {\n    extraLarge\n    large\n    color\n  }\n  source\n  description\n  averageScore\n  popularity\n  duration\n  nextAiringEpisode{\n    airingAt\n    timeUntilAiring\n    episode\n  }";function n(){const e=(new Date).getMonth()+1;let n="winter";return e>=10&&e<=12?n="fall":e>=4&&e<=6?n="spring":e>=7&&e<=9&&(n="summer"),n.toUpperCase()}const t={popularAiring:{query:`query ($page: Int, $perPage: Int) {\n        Page(page: $page, perPage: $perPage) {\n          pageInfo {\n            total\n            perPage\n          }\n          media(type: ANIME, season: ${n()}, seasonYear: ${(new Date).getFullYear()}, sort: POPULARITY_DESC) {\n            ${e}\n          }\n        }\n      }\n      `,variable:{page:1,perPage:7}},popularNextSeason:{query:`query ($page: Int, $perPage: Int) {\n      Page(page: $page, perPage: $perPage) {\n        pageInfo {\n          total\n          perPage\n        }\n        media(type: ANIME, status: NOT_YET_RELEASED, season: ${(a=n(),"winter"===a?"spring":"spring"===a?"summer":"summer"===a?"fall":"winter").toUpperCase()}, sort: POPULARITY_DESC) {\n          ${e}\n        }\n      }\n    }\n    `,variable:{page:1,perPage:7}},allTimePopular:{query:`query ($page: Int, $perPage: Int) {\n        Page(page: $page, perPage: $perPage) {\n          pageInfo {\n            total\n            perPage\n          }\n          media(type: ANIME, sort: POPULARITY_DESC) {\n            ${e}\n          }\n        }\n      }\n      `,variable:{page:1,perPage:7}},trending:{query:`query ($page: Int, $perPage: Int) {\n        Page(page: $page, perPage: $perPage) {\n          pageInfo {\n            total\n            perPage\n          }\n          media(type: ANIME, sort: TRENDING_DESC) {\n            ${e}\n          }\n        }\n      }\n      `,variable:{page:1,perPage:7}}};var a;async function r(e,n){let t=e,a=n,r={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:t,variables:a}),mode:"cors"},i=await fetch("https://graphql.anilist.co",r);return(await i.json()).data.Page.media}function i(e,n){return e>0?e+(1===e?` ${n}, `:` ${n}s, `):""}function s(){const e=this.querySelector("iframe.trailer");this.style.zIndex=999,this.style.transform="scale(2)",this.querySelector(".cover").style.opacity=0,this.querySelector(".title").style.opacity=0,this.querySelector(".details-overlay").style.opacity=1,function(e){const n=e.getBoundingClientRect();return n.left<110||n.right>(window.innerWidth-110||document.documentElement.clientWidth-110)}(this)&&(this.style.translate=this.getBoundingClientRect().x<window.innerWidth/2?"120px":"-120px"),e.src===window.location.href&&setTimeout((()=>{e.src=`https://www.youtube-nocookie.com/embed/${this.dataset.video_id}?controls=0`}),200)}function o(){this.querySelector("iframe.trailer").src="",this.style.zIndex=1,this.style.transform="scale(1)",this.style.translate="0",setTimeout((()=>{this.querySelector(".details-overlay").style.opacity=0,this.querySelector(".cover").style.opacity=1,this.querySelector(".title").style.opacity=1}),150)}const l=function(){return r(t.trending.query,t.trending.variable)},c=function(){return r(t.popularAiring.query,t.popularAiring.variable)},d=function(){return r(t.popularNextSeason.query,t.popularNextSeason.variable)},p=function(){return r(t.allTimePopular.query,t.allTimePopular.variable)},u=function(e,n,t){const a=function(e,n){const t=`\n    <section class="${e} results-container w-full featured-sect relative bottom-6 my-10">\n\n      <div class=" section-header pb-[20px] flex justify-between items-center">\n        <h2 class="sect-title">${n}</h2>\n        <a class=" text-[var(--main-brand)] text-xs font-light cursor-pointer">View more</a>\n      </div>\n      <div class="media-wrapper"></div>\n    </section>\n    `;return document.querySelector("main").insertAdjacentHTML("beforeend",t),document.querySelector(`.${e} .media-wrapper`)}(e,n);t().then((n=>{n.forEach((e=>{const n=function(e){console.log(e);const n=e.genres.slice(0,3),t=`<div class="media-card cursor-pointer relative max-w-[144px] md:max-w-[185px] h-fit rounded-md" data-video_id =${e.trailer?.id} data-media_id=${e.id}>\n      <div class="cover w-full cursor-pointer rounded-md relative overflow-hidden inline-block"\n        ><img\n        class="w-full h-[202.54px] md:h-[265px] relative object-cover" src="${e.coverImage.extraLarge}" alt=""/>\n      </div>\n      <a href="" class="title text-[0.8rem] md:text-[0.9rem] pt-1 inline-block w-[140px] md:w-[180px] overflow-hidden text-ellipsis">${e.title?.english||e.title?.romaji||e.title?.native}</a>\n      <div class="details-overlay overflow-hidden rounded-md bg-[var(--overlay-grey)] opacity-0 absolute w-full left-0 top-0">\n      <div class="trailer-container relative w-full overflow-hidden pt-[56.25%]">\n        <iframe\n        class="trailer absolute top-0 left-0 right-0 bottom-0 w-full h-full rounded-t-md"\n        src=""\n        title="YouTube video player"\n        frameborder="0"\n        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n        allowfullscreen\n      ></iframe>\n      </div>\n      <div class="basic-dets w-full relative p-[6px]">\n      <div class="avg-score absolute right-2 top-[5px] text-[0.475rem]">\n        <i class="fa-regular ${r=e.averageScore,null===r?"fa-face-dizzy text-[var(--heading-grey)]":r>0&&r<65?"fa-face-frown text-[#CF6679]":r>=65&&r<75?"fa-face-meh text-[#FF7A3C]":"fa-face-smile text-[#7BD555]"}"></i>\n        <span class="score-value text-[var(--main-text)]">${null!==e.averageScore?e.averageScore+"%":"NA"}</span>\n      </div>\n      <div class="basic-dets-episodes font-medium text-[0.45rem] text-[var(--main-brand)]">\n        ${function(e){return"FINISHED"===e.status?`Episode ${e.episodes} aired on`:e?.nextAiringEpisode&&e?.episodes?`Episode ${e.nextAiringEpisode.episode} of ${e.episodes} airing in  `:e?.nextAiringEpisode?`Episode ${e.nextAiringEpisode.episode} airing in  `:"NOT_YET_RELEASED"===e.status?`Airing in ${e.season.charAt(0).toUpperCase()+e.season.slice(1).toLowerCase()} ${e.seasonYear}`:void 0}(e)}\n      </div>\n      <div\n        class="basic-dets-countdown text-[0.45rem] pb-[1px] text-[var(--heading-grey)] font-medium"\n      >\n        ${function(e){return"NOT_YET_RELEASED"===e.status?e.seasonYear:"FINISHED"===e.status?`${e.endDate.day}/${e.endDate.month}/${e.endDate.year}`:"RELEASING"===e.status?function(e){Math.floor(e%60);const n=Math.floor(e%3600/60),t=Math.floor(e%86400/3600),a=Math.floor(e/86400),r=i(n,"min"),s=i(t,"hr");return`${i(a,"day")}${s}${r}`.replace(/,\s*$/,"")}(e.nextAiringEpisode.timeUntilAiring):void 0}(e)}\n      </div>\n      <div\n        class="basic-dets-source text-[0.4rem] font-medium text-[var(--main-text)] mb-1"\n      >\n        Source â€¢ ${a=e.source,a.includes("_")?a.replace("_"," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()}\n      </div>\n      <p\n        class="basic-dets-synopsis text-[var(--main-text)] text-[0.4rem] font-medium mb-6"\n      >\n       ${e.description}\n      </p>\n      <div\n        class="genres flex justify-center items-center gap-1 pl-1 absolute pb-2 bottom-0 left-0"\n      >\n      ${n.map((e=>function(e){return`<div class="genre min-w-[30px] text-center rounded-[10px] font-semibold text-[6px] py-[2px] px-2 bg-[var(--main-brand)] text-[var(--overlay-grey)]">${e}</div>`}(e))).join("")}\n      </div>\n    </div>\n    </div>\n    </div>\n      `;var a,r;return t}(e);a.insertAdjacentHTML("beforeend",n)}));let t=null;document.querySelectorAll(`.${e} .media-card`).forEach((e=>{e.addEventListener("mouseenter",(function(n){t=setTimeout((function(){s.call(e)}),400)})),e.addEventListener("mouseleave",(function(){clearTimeout(t),o.call(e)}))}))}))},g=document.querySelector(".search-btn"),m=document.querySelector(".search-bar"),v=document.querySelector(".hide-search-bar");document.addEventListener("DOMContentLoaded",(()=>{u("trending","Trending",l),u("popular-this-season","Popular this season",c),u("upcoming","Upcoming next season",d),u("popular","All time popular",p)})),g.addEventListener("click",(()=>{var e;e=g,m.classList.add("_visible"),e.classList.add("_hidden")})),v.addEventListener("click",(()=>{var e;e=g,m.classList.remove("_visible"),e.classList.remove("_hidden")}))})();